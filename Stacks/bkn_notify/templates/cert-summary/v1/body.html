<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if mso]>
  <style type="text/css">
    body, table, td {font-family: Arial, sans-serif !important;}
  </style>
  <![endif]-->
</head>

<body style="margin:0; padding:0; background-color:#f4f4f4; font-family:Arial, sans-serif;">

  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" bgcolor="#f4f4f4">
    <tr>
      <td align="center" style="padding:20px 0;">

        <!-- Container -->
        <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="700" bgcolor="#ffffff" style="border-collapse:collapse;">

          <!-- Header -->
          <tr>
            <td align="center" bgcolor="#28a745" style="padding:20px;">
              <h1 style="margin:0; font-size:24px; font-weight:bold; color:#ffffff;">üìä RESUMEN CERTIFICADOS SSL</h1>
            </td>
          </tr>

          <!-- Content -->
          <tr>
            <td bgcolor="#f8f9fa" style="padding:30px 20px;">

              <!-- Summary Box -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e8f5e8" style="border:2px solid #28a745; border-radius:4px;">
                <tr>
                  <td style="padding:20px; font-size:16px; color:#333333; line-height:1.5;">
                    <strong>Verificaci√≥n completada el {{ fecha_verificacion }}</strong><br>
                    Se han verificado {{ total_certificados }} certificados SSL en el sistema.
                  </td>
                </tr>
              </table>

              <!-- Statistics Table -->
              <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-top:20px; border:1px solid #dee2e6;">
                <tr>
                  <th colspan="2" align="left" bgcolor="#f8f9fa" style="padding:12px 10px; font-size:14px; font-weight:bold; color:#495057; border-bottom:2px solid #dee2e6;">
                    RESUMEN ESTAD√çSTICO
                  </th>
                </tr>
                <tr>
                  <td style="padding:8px 10px; font-weight:bold; color:#555555;">‚úÖ Certificados v√°lidos (&gt; {{ umbral_dias }} d√≠as)</td>
                  <td align="center" style="padding:8px 10px; font-weight:bold; color:#28a745;">{{ total_validos }}</td>
                </tr>
                <tr>
                  <td style="padding:8px 10px; font-weight:bold; color:#555555;">‚ö†Ô∏è Necesitan renovaci√≥n autom√°tica</td>
                  <td align="center" style="padding:8px 10px; font-weight:bold; color:#28a745;">{{ total_auto_pendientes }}</td>
                </tr>
                <tr>
                  <td style="padding:8px 10px; font-weight:bold; color:#555555;">üîß Requieren renovaci√≥n manual</td>
                  <td align="center" style="padding:8px 10px; font-weight:bold; color:#28a745;">{{ total_manual_pendientes }}</td>
                </tr>
                <tr>
                  <td style="padding:8px 10px; font-weight:bold; color:#555555;">‚ùå Errores encontrados</td>
                  <td align="center" style="padding:8px 10px; font-weight:bold; color:#28a745;">{{ total_errores }}</td>
                </tr>
              </table>

              <!-- Certificate Details -->
              <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-top:20px; border:1px solid #dee2e6;">
                <tr>
                  <th align="left" bgcolor="#495057" style="color:#ffffff; padding:12px 8px; font-size:14px; font-weight:bold;">Dominio</th>
                  <th align="left" bgcolor="#495057" style="color:#ffffff; padding:12px 8px; font-size:14px; font-weight:bold;">Estado</th>
                  <th align="left" bgcolor="#495057" style="color:#ffffff; padding:12px 8px; font-size:14px; font-weight:bold;">D√≠as Restantes</th>
                  <th align="left" bgcolor="#495057" style="color:#ffffff; padding:12px 8px; font-size:14px; font-weight:bold;">Tipo</th>
                  <th align="left" bgcolor="#495057" style="color:#ffffff; padding:12px 8px; font-size:14px; font-weight:bold;">Fecha Vencimiento</th>
                </tr>
                {% for cert in certificados %}
                <tr>
                  <td style="padding:10px 8px; font-size:13px;"><strong>{{ cert.dominio }}</strong></td>
                  <td style="padding:10px 8px; font-size:13px;">
                    {% if cert.estado == 'V√ÅLIDO' %}
                    <span style="background-color:#d4edda; color:#155724; padding:4px 8px; border-radius:3px; font-size:12px; font-weight:bold;">{{ cert.estado }}</span>
                    {% elif cert.estado == 'RENOVACI√ìN AUTO' %}
                    <span style="background-color:#fff3cd; color:#856404; padding:4px 8px; border-radius:3px; font-size:12px; font-weight:bold;">{{ cert.estado }}</span>
                    {% elif cert.estado == 'RENOVACI√ìN MANUAL' %}
                    <span style="background-color:#f8d7da; color:#721c24; padding:4px 8px; border-radius:3px; font-size:12px; font-weight:bold;">{{ cert.estado }}</span>
                    {% else %}
                    <span style="background-color:#f5c6cb; color:#721c24; padding:4px 8px; border-radius:3px; font-size:12px; font-weight:bold;">{{ cert.estado }}</span>
                    {% endif %}
                  </td>
                  <td style="padding:10px 8px; font-size:13px;">{{ cert.dias_restantes }}</td>
                  <td style="padding:10px 8px; font-size:13px;">{{ cert.tipo }}</td>
                  <td style="padding:10px 8px; font-size:13px;">{{ cert.fecha_vencimiento }}</td>
                </tr>
                {% endfor %}
              </table>

              {% if proxima_verificacion %}
              <p style="margin:15px 0; font-size:16px; line-height:1.5; color:#333333;">
                <strong>Pr√≥xima verificaci√≥n:</strong> {{ proxima_verificacion }}
              </p>
              {% endif %}

            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td align="center" bgcolor="#f8f9fa" style="padding:15px 20px; border-top:1px solid #dee2e6;">
              <p style="margin:0; font-size:12px; color:#6c757d; line-height:1.4;">
                Este es un resumen autom√°tico del sistema de gesti√≥n de certificados SSL.<br>
                Generado el {{ timestamp }} por Notify API
              </p>
            </td>
          </tr>

        </table>

      </td>
    </tr>
  </table>

</body>
</html>
