<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if mso]>
  <style type="text/css">
    body, table, td {font-family: Arial, sans-serif !important;}
  </style>
  <![endif]-->
</head>

<body style="margin:0; padding:0; background-color:#f4f4f4; font-family:Arial, sans-serif;">

  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" bgcolor="#f4f4f4">
    <tr>
      <td align="center" style="padding:20px 0;">

        <!-- Container -->
        <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" bgcolor="#ffffff" style="border-collapse:collapse;">

          <!-- Header -->
          <tr>
            <td align="center" bgcolor="#dc2626" style="padding:20px;">
              <h1 style="margin:0; font-size:24px; font-weight:bold; color:#ffffff;">üö® ALERTA DEL SISTEMA</h1>
            </td>
          </tr>

          <!-- Content -->
          <tr>
            <td bgcolor="#f8f9fa" style="padding:30px 20px;">

              <!-- Caja principal -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#fef2f2" style="border:2px solid #dc2626;">
                <tr>
                  <td style="padding:20px; font-size:16px; color:#333333;">
                    <strong>Se ha detectado un problema que requiere atenci√≥n:</strong>
                  </td>
                </tr>
                <tr>
                  <td style="padding:0 20px 20px 20px;">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555555;" width="35%">Servidor:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#dc2626;">{{ servidor }}</td>
                      </tr>
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555555;">Tipo de alerta:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#dc2626;">{{ tipo_alerta }}</td>
                      </tr>
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555555;">Severidad:</td>
                        <td style="padding:6px 10px;">
                          {% if severidad == 'critical' -%}
                          <span style="background-color:#dc2626; color:#ffffff; padding:4px 12px; font-size:14px; font-weight:bold; display:inline-block;">CR√çTICA</span>
                          {% elif severidad == 'high' -%}
                          <span style="background-color:#ea580c; color:#ffffff; padding:4px 12px; font-size:14px; font-weight:bold; display:inline-block;">ALTA</span>
                          {% else -%}
                          <span style="background-color:#ca8a04; color:#ffffff; padding:4px 12px; font-size:14px; font-weight:bold; display:inline-block;">MEDIA</span>
                          {% endif %}
                        </td>
                      </tr>
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555555;">Detecci√≥n:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#dc2626;">{{ hora_deteccion }}</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>

              {% if uso_disco -%}
              <!-- Disco -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#f8fafc" style="border:2px solid #64748b; margin-top:15px;">
                <tr>
                  <td style="padding:15px; font-size:16px; font-weight:bold; color:#1f2937;">üíæ Espacio en Disco</td>
                </tr>
                <tr>
                  <td style="padding:0 15px 15px 15px;">
                    <table role="presentation" width="100%">
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Uso actual:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ uso_disco }}%</td>
                      </tr>
                      {% if espacio_libre -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Espacio libre:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ espacio_libre }}</td>
                      </tr>
                      {% endif %}
                      {% if punto_montaje -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Punto de montaje:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ punto_montaje }}</td>
                      </tr>
                      {% endif %}
                    </table>
                    <div style="width:100%; height:20px; background:#e5e7eb; border-radius:10px; margin-top:5px;">
                      <div style="height:20px; border-radius:10px; width:{{ uso_disco }}%; {% if uso_disco|int >= 90 %}background:#dc2626;{% elif uso_disco|int >= 80 %}background:#f59e0b;{% else %}background:#10b981;{% endif %}"></div>
                    </div>
                  </td>
                </tr>
              </table>
              {% endif %}

              {% if uso_memoria -%}
              <!-- Memoria -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#f8fafc" style="border:2px solid #64748b; margin-top:15px;">
                <tr>
                  <td style="padding:15px; font-size:16px; font-weight:bold; color:#1f2937;">üß† Uso de Memoria</td>
                </tr>
                <tr>
                  <td style="padding:0 15px 15px 15px;">
                    <table role="presentation" width="100%">
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Memoria usada:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ uso_memoria }}%</td>
                      </tr>
                      {% if memoria_total -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">RAM total:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ memoria_total }}</td>
                      </tr>
                      {% endif %}
                      {% if memoria_disponible -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">RAM disponible:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ memoria_disponible }}</td>
                      </tr>
                      {% endif %}
                    </table>
                    <div style="width:100%; height:20px; background:#e5e7eb; border-radius:10px; margin-top:5px;">
                      <div style="height:20px; border-radius:10px; width:{{ uso_memoria }}%; {% if uso_memoria|int >= 90 %}background:#dc2626;{% elif uso_memoria|int >= 80 %}background:#f59e0b;{% else %}background:#10b981;{% endif %}"></div>
                    </div>
                  </td>
                </tr>
              </table>
              {% endif %}

              {% if uso_cpu -%}
              <!-- CPU -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#f8fafc" style="border:2px solid #64748b; margin-top:15px;">
                <tr>
                  <td style="padding:15px; font-size:16px; font-weight:bold; color:#1f2937;">‚ö° Uso de CPU</td>
                </tr>
                <tr>
                  <td style="padding:0 15px 15px 15px;">
                    <table role="presentation" width="100%">
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">CPU actual:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ uso_cpu }}%</td>
                      </tr>
                      {% if load_average -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Load average:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ load_average }}</td>
                      </tr>
                      {% endif %}
                      {% if procesos_activos -%}
                      <tr>
                        <td style="padding:6px 10px; font-weight:bold; color:#555;">Procesos activos:</td>
                        <td style="padding:6px 10px; font-weight:bold; color:#0f172a;">{{ procesos_activos }}</td>
                      </tr>
                      {% endif %}
                    </table>
                    <div style="width:100%; height:20px; background:#e5e7eb; border-radius:10px; margin-top:5px;">
                      <div style="height:20px; border-radius:10px; width:{{ uso_cpu }}%; {% if uso_cpu|int >= 90 %}background:#dc2626;{% elif uso_cpu|int >= 80 %}background:#f59e0b;{% else %}background:#10b981;{% endif %}"></div>
                    </div>
                  </td>
                </tr>
              </table>
              {% endif %}

              {% if accion_recomendada -%}
              <!-- Acci√≥n -->
              <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#fffbeb" style="border:2px solid #f59e0b; margin-top:15px;">
                <tr>
                  <td style="padding:20px; font-size:16px; color:#333; line-height:1.5;">
                    <strong>‚ö†Ô∏è Acci√≥n recomendada:</strong><br>
                    {{ accion_recomendada }}
                  </td>
                </tr>
              </table>
              {% endif %}

            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td align="center" bgcolor="#f8f9fa" style="padding:15px 20px; border-top:1px solid #dee2e6;">
              <p style="margin:0; font-size:12px; color:#6c757d; line-height:1.4;">
                Este es un mensaje autom√°tico del sistema de monitoreo.<br>
                Generado el {{ timestamp }} por Notify API
              </p>
            </td>
          </tr>

        </table>

      </td>
    </tr>
  </table>

</body>
</html>
